# Allow Traefik ingress controller to reach services in the monitoring namespace
# This enables external access to Grafana and other monitoring UIs via Ingress
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: allow-traefik-ingress-to-monitoring
  namespace: monitoring
spec:
  podSelector: {}
  policyTypes:
    - Ingress
  ingress:
    - from:
        - namespaceSelector:
            matchLabels:
              kubernetes.io/metadata.name: kube-system
          podSelector:
            matchLabels:
              app.kubernetes.io/name: traefik
      ports:
        # Grafana HTTP (internal port)
        - protocol: TCP
          port: 3000
        # Common service port
        - protocol: TCP
          port: 80
